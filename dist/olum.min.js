/**
* @name Olum.js
* @version 0.2.0
* @copyright 2021
* @author Eissa Saber
* @license MIT
*/
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Olum=t()}("undefined"!=typeof self?self:this,function(){"use strict";var n="undefined"!=typeof self?self:this,c="Olum [warn]:",o=!0;function u(){return-1!==["localhost","127.0.0.1"].indexOf(n.location.hostname)}function f(e){return null!==e&&"object"==typeof e}function d(e){return f(e)&&Array.isArray(e)&&e.length}function h(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function y(e,t){t="err"==(t=null==t?"log":t)?"error":t,o&&(Array.isArray(e)?console[t].apply(console,e):console[t](e))}return String.prototype.cap=function(){return this.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},function e(t){if(!(this instanceof e))throw new Error("can't invoke 'Olum' without 'new' keyword");var m=null,p=null,o=null,s=t&&t.prefix?t.prefix:null;function r(e){var a=[];return function e(t){if(t.hasOwnProperty("components")&&f(r=t.components)&&Array.isArray(Object.keys(r))&&Object.keys(r).length)for(var n in t.components){var o={};h(o,"parent",t.name),h(o,"child",{}),h(o.child,"name",n),n=new t.components[n],h(o.child,"data",n.data()),a.push(o),o.hasOwnProperty("child")&&o.child.hasOwnProperty("data")&&e(o.child.data)}var r}(e),a}function a(e){var t="olum_style_tag",n=document.getElementById(t);n||((n=document.createElement("style")).id=t,document.head.append(n)),n.innerHTML=e+"\n [to] * {pointer-events: none;}"}function l(e){var t=e.entry,n=e.compsArr,o=t.template||"",r=t.style||"",a={};if(t.render&&(a[0]=t.render),d(n))for(var l=0;l<n.length;l++){var i=(m=n[l].child.data).template||"",c=m.style||"",u=m.render||null,m=s?s+"-"+m.name:m.name,m=new RegExp("<("+m+"\\s{0,})\\/>","gi"),o=o.replace(m,i);r+=c,null!==u&&(a[l+1]=u)}return{template:o,style:r,script:a}}function i(e,t){for(var n=/(olum-component=[\"\']([^\"|\']*)[\"\'])|(olum-component)/gi,o=/<[a-z]+(>|.*?[^?]>)/gi,r=/\>/gi,a=Array.from(t),e=e,l=0;l<a.length;l++){var i,c,u=a[l].child.data.name||"undefined";a[l].child&&a[l].child.data&&a[l].child.data.hasOwnProperty("template")&&((i=a[l].child.data).template=i.template.replace(n,""),d(c=i.template.match(o))&&(i.template=i.template.replace(c[0],c[0].replace(r," olum-component='"+u+"'>"))))}return e.template&&(u=e.name||"undefined",e.template=e.template.replace(n,""),d(c=e.template.match(o))&&(e.template=e.template.replace(c[0],c[0].replace(r," olum-component='"+u+"' router-view='"+u+"'>")))),m.setAttribute("olum-component",p),{entry:e,compsArr:a}}this.use=function(e){if(!e)throw new Error(c+" Missing component or router @use()");if(!(o=e.name&&"function"==typeof e.name&&"OlumRouter"===e.name()?{type:"router",cb:e}:{type:"component",cb:e}))throw new Error(c+" Root component or router are not defined!");!function(){if(!m)throw new Error(c+" Root Element is not found in DOM!");!function(){if(y({mount:"mount()",rootElm:m,which:o}),!(o&&o.type&&o.cb))throw new Error(c+" Can't mount, Missing component or router @use()");"router"===o.type?function(){y("use OlumRouter");var e=o.cb;e.__proto__.rootElm=m,e.__proto__.buildStyles=a,e.__proto__.buildTree=r,e.__proto__.labelView=i,e.__proto__.merge=l,e.isReady&&e.listen()}():"component"===o.type&&function(){y("use component");var e=(new o.cb).data(),t=r(e),n=l(u()?i(e,t):{entry:e,compsArr:t});a(n.style),m.innerHTML=n.template,setTimeout(function(){for(var e in n.script)n.script[e]()},0)}()}()}()},this.$=function(e){if(!e)throw new Error(c+" Root Element is not found in DOM!");var t;return-1!==e.indexOf(".")?t=".":-1!==e.indexOf("#")&&(t="#"),u()&&(p=e.replace(/\#|\./,"").cap(),n.olumDevtool={rootCompName:p,selector:e}),e=e.replace(/\#|\./,""),m="."===t?document.getElementsByClassName(e)[0]:"#"===t?document.getElementById(e):document.getElementsByTagName(e)[0],this}}});